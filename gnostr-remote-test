## BEGIN:contents of $0"
#!/usr/bin/env bash
#set -x
TOTAL_MEMORY_BYTES=$(sysctl -n hw.memsize)
TOTAL_MEMORY_GB=$(echo "scale=2; $TOTAL_MEMORY_BYTES / (1024 * 1024 * 1024)" | bc)
echo "Total Memory: ${TOTAL_MEMORY_GB} GB"
echo "Current User: $(whoami)"
echo "Current Directory: $(pwd)"
echo "" # Blank line for separation
echo "--- Script Information ---"
echo "Script PID: $$"
echo "hello, gnostr-remote-test!"
HASH=$(gnostr --hash "")
echo $HASH
NSEC=${1:-$HASH}
echo $NSEC
export EVENT1=$(gnostr --nsec ${NSEC} -r wss://relay.snort.social custom-event -k 30617 -c "" -t "a|30617" -t "d|gnostr" -t "name|gnostr" -t "description|a git+nostr workflow utilty" -t "web|git.gnostr.org" -t "clone|git.gnostr.org" -t "relays|wss://relay.damus.io, wss://relay.gnostr.org" -t "r|<earliest_unique_commit>" -t "maintainers|gnostr <admin@gnostr.org>" -t "t|this_is_a_test_PoC_of_adistributed_decentralized_CI_service" -t "weeble|$(gnostr --weeble)" -t "blockheight|$(gnostr --blockheight)" -t "wobble|$(gnostr --wobble)")
echo "Raw EVENT1: $EVENT1"
RAW_BECH32_OUTPUT=$(gnostr bech32-to-any $EVENT1)
echo "Raw bech32-to-any output: $RAW_BECH32_OUTPUT"
export EVENT1_ID=$(echo "$RAW_BECH32_OUTPUT" | jq -r '.note')
gnostr fetch-by-id --id $EVENT1_ID -r wss://relay.snort.social
sleep 5

export EVENT2=$(gnostr --nsec ${NSEC} -r wss://relay.snort.social custom-event -k 1 -c "#gnostr distributed/decentralized CI EVENT! REF:https://nostr.band/?q=$EVENT1_ID" -t "a|30617" -t "d|gnostr" -t "name|gnostr" -t "description|a git+nostr workflow utilty" -t "web|git.gnostr.org" -t "clone|git.gnostr.org" -t "relays|wss://relay.damus.io, wss://relay.gnostr.org" -t "r|<earliest_unique_commit>" -t "maintainers|gnostr <admin@gnostr.org>" -t "t|this_is_a_test_PoC_of_adistributed_decentralized_CI_service" -t "weeble|$(gnostr --weeble)" -t "blockheight|$(gnostr --blockheight)" -t "wobble|$(gnostr --wobble)")
echo "Raw EVENT2: $EVENT2"
RAW_BECH32_OUTPUT2=$(gnostr bech32-to-any $EVENT2)
echo "Raw bech32-to-any output for EVENT2: $RAW_BECH32_OUTPUT2"
export EVENT2_ID=$(echo "$RAW_BECH32_OUTPUT2" | jq -r '.note')
gnostr fetch-by-id --id $EVENT2_ID -r wss://relay.snort.social
sleep 5
gnostr --nsec $(gnostr privkey-to-bech32 $NSEC) -r wss://relay.snort.social react --event-id $EVENT1_ID --reaction "+"
sleep 5
sleep 5
gnostr --nsec $NSEC -r wss://relay.damus.io react --event-id 8bd85322d47f896c1cc4b20887b08513a0c6065b997debe7f4e87cc949ee7686 --reaction "+"
sleep 5
gnostr --nsec $NSEC -r wss://relay.damus.io react --event-id 8bd85322d47f896c1cc4b20887b08513a0c6065b997debe7f4e87cc949ee7686 --reaction "+"
## END:contents of $0"
