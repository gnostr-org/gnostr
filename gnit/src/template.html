<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0f0f0f" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src *; manifest-src *; connect-src * ws: wss:; script-src * 'unsafe-inline' 'unsafe-eval'; script-src-elem * 'unsafe-inline'; script-src-attr * 'unsafe-inline' 'unsafe-hashes'; style-src * 'unsafe-inline' 'unsafe-hashes'; img-src * data:; media-src *; font-src *; child-src *;"
    />
    <title>gnostr</title>
    <link rel="manifest" href="/pwa/manifest.json" />
    <link rel="icon" href="/images/icon.svg" type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/pwa/icon-256.png" />
    <link rel="stylesheet" href="/css/vars.css?v=1" />
    <link rel="stylesheet" href="/css/utils.css?v=1" />
    <link rel="stylesheet" href="/css/styles.css?v=13" />
    <link rel="stylesheet" href="/css/responsive.css?v=10" />
    <script defer src="/js/util.js?v=5"></script>
    <script defer src="/js/ui/safe-html.js?v=1"></script>
    <script defer src="/js/ui/util.js?v=8"></script>
    <script defer src="/js/ui/render.js?v=15"></script>
    <script defer src="/js/ui/state.js?v=1"></script>
    <script defer src="/js/ui/fmt.js?v=1"></script>
    <script defer src="/js/ui/profile.js?v=1"></script>
    <script defer src="/js/ui/settings.js?v=1"></script>
    <script defer src="/js/ui/dm.js?v=1"></script>
    <script defer src="/js/nostr.js?v=7"></script>
    <script defer src="/js/core.js?v=1"></script>
    <script defer src="/js/model.js?v=1"></script>
    <script defer src="/js/contacts.js?v=1"></script>
    <script defer src="/js/event.js?v=1"></script>
    <script defer src="/js/lib.js?v=1"></script>
    <script defer src="/js/main.js?v=1"></script>
    <script defer src="/js/db.js?v=1"></script>
  </head>
  <body>
    <div id="container-busy">
      <div class="loader" title="Loading...">
        <img class="dark-invert" src="/images/loader-fragment.svg" />
      </div>
    </div>
    <div id="container-welcome" class="hide">
      <div class="hero-box">
        <div class="padded">
          <h1>
            gnostr
            <img class="icon svg" src="/images/logo-inverted.svg" />
          </h1>
          <p>Please access with a nos2x compatible browser.</p>
        </div>
      </div>
    </div>

    <!-- Main application wrapper -->
    <div id="app-main" class="hide">
      <!-- Global Header (e.g., for app title or global actions) -->
      <header id="global-header">
        <button
          id="global-header-gnostr-btn"
          action="open-view"
          data-view="gnostr"
          class="nav icon active"
          title="gnostr.org"
        >
          <img class="icon svg inactive" src="/images/logo-inverted.svg" />
          <img class="icon svg active" src="/images/logo.svg" />
          <span id="app-title-btn-label">gnostr</span>
          <label id="app-title"></label>
        </button>
        <!-- Potentially add global actions here -->
      </header>

      <!-- List-Detail Container -->
      <div id="list-detail-container">
        <!-- Master Pane (e.g., main navigation, list of items) -->
        <div id="master-pane">
          <nav id="nav" class="nav full flex-noshrink">
            <div>
              <button action="open-view" data-view="friends" class="nav icon" title="__73Home__">
                <img class="icon svg inactive" src="/images/home.svg" />
                <img class="icon svg active" src="/images/home-active.svg" />
              </button>
              <!-- add data-view="nip34-view-friends" -->
              <button action="open-view" data-view="nip34-view-friends" class="nav icon" title="Nip34">
                <img class="icon svg inactive" src="/images/logo-inverted.svg" />
                <img class="icon svg active" src="/images/logo.svg" />
              </button>

              <button action="open-view" data-view="dm" class="nav icon" title="Direct Messages">
                <img class="icon svg inactive" src="/images/messages.svg" />
                <img class="icon svg active" src="/images/messages-active.svg" />
                <div class="new-notifications hide" role="dm"></div>
              </button>
              <button action="open-view" data-view="notifications" class="nav icon" title="Notifications">
                <img class="icon svg inactive" src="/images/notifications.svg" />
                <img class="icon svg active" src="/images/notifications-active.svg" />
                <div class="new-notifications hide" role="activity"></div>
              </button>
              <button action="open-view" data-view="settings" title="Settings" class="nav icon">
                <img class="icon svg inactive" src="/images/settings.svg" />
                <img class="icon svg active" src="/images/settings-active.svg" />
              </button>
              <button action="new-note" title="New Note" class="nav icon new-note">
                <img class="icon svg inactive" src="/images/new-note.svg" />
                <img class="icon svg active" src="/images/new-note.svg" />
              </button>
            </div>
          </nav>
        </div>

        <!-- Detail Pane (e.g., content for selected item/view) -->
        <div id="detail-pane">
          <div id="view">
            <header>
              <label></label>
              <div id="header-tools">
                <input type="search" id="main-search" placeholder="Search..." />
                <button class="action small hide" disabled action="mark-all-read">Mark All Read</button>
                <img class="pfp hide" role="their-pfp" data-pubkey="" src="/images/no-user.svg" />
                <img class="pfp hide" role="my-pfp" data-pubkey="" src="/images/no-user.svg" />
              </div>
            </header>
            <div id="gnostr-nip34-feed" class="events hide"></div>
            <div id="profile-info" role="profile-info" class="bottom-border hide">
              <div class="profile-banner" name="profile-banner"></div>
              <div class="flex">
                <img name="profile-image" class="pfp jumbo hide" />
                <label name="profile-nip05"></label>
                <div class="profile-tools">
                  <button class="icon link hide" name="profile-website" action="open-link">
                    <img class="icon svg" src="/images/profile-website.svg" />
                  </button>
                  <button
                    class="icon link hide"
                    title="Copy Lightning Address"
                    name="profile-lud06"
                    action="open-lud06"
                  >
                    <img class="icon svg" src="/images/profile-zap.svg" />
                  </button>
                  <button class="icon" name="message-user" title="Directly Message">
                    <img class="icon svg" src="/images/message-user.svg" />
                  </button>
                  <button class="icon" name="copy-pk" data-pk="" title="Copy Public Key">
                    <img class="icon svg" src="/images/pubkey.svg" />
                  </button>

                  <button class="action" name="follow-user" data-pk="">Follow</button>
                  <button class="action" name="edit-profile" title="Update Profile">Update</button>
                </div>
              </div>
              <div>
                <p name="profile-about"></p>
              </div>
            </div>
            <div id="dms" class="hide"></div>
            <div id="show-new" class="show-new hide" action="show-timeline-new">
              <button>Show <span>0</span> new notes</button>
            </div>
            <div id="timeline" class="events"></div>
            <div id="show-more" class="show-more">
              <button action="show-timeline-more">Show More</button>
              <button action="show-nip34-more" class="hide">Show More NIP-34</button>
            </div>
            <div class="loading-events">
              <div class="loader" title="Loading...">
                <img class="dark-invert" src="/images/loader-fragment.svg" />
              </div>
            </div>
            <div id="settings" class="hide">
              <section>
                <header>
                  <label>Relays</label>
                  <button id="add-relay" class="btn-text">
                    <img class="svg icon small" src="/images/add-relay.svg" />
                  </button>
                </header>
                <table id="relay-list" class="row">
                  <thead>
                    <tr>
                      <td class="column-address">Address</td>
                      <td class="column-action">Remove</td>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Dynamically generated rows should have <td> with classes: column-address, column-action -->
                  </tbody>
                </table>
              </section>
              <section>
                <header>
                  <label>NIP-65 Relays</label>
                </header>
                <table id="nip65-relay-list" class="row">
                  <thead>
                    <tr>
                      <td class="column-address">Address</td>
                      <td class="column-action">Policy</td>
                      <td class="column-action">Add</td>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Dynamically generated rows should have <td> with classes: column-address, column-action -->
                  </tbody>
                </table>
              </section>
              <section>
                <header><label>Info</label></header>
                <p>
                  <a href="https://github.com/gnostr-org/gnostr">Source Code</a>
                  <a href="https://github.com/gnostr-org/gnostr/issues">Bug Tracker</a>
                  <a href="mailto:admin@gnostr.org">Email Me</a>
                </p>
              </section>
            </div>
            <footer>
              <div id="dm-post" class="hide">
                <textarea class="post-input dm" name="message"></textarea>
                <div class="post-tools">
                  <button name="send-dm" class="action">Send</button>
                </div>
              </div>
              <nav class="nav mobile">
                <button action="open-view" data-view="friends" class="icon" title="__228Home__">
                  <img class="icon svg inactive" src="/images/home.svg" />
                  <img class="icon svg active" src="/images/home-active.svg" />
                </button>
                <button action="open-view" data-view="dm" class="icon" title="Direct Messages">
                  <img class="icon svg inactive" src="/images/messages.svg" />
                  <img class="icon svg active" src="/images/messages-active.svg" />
                  <div class="new-notifications hide" role="dm"></div>
                </button>
                <button action="open-view" data-view="notifications" class="icon" title="Notifications">
                  <img class="icon svg inactive" src="/images/notifications.svg" />
                  <img class="icon svg active" src="/images/notifications-active.svg" />
                  <div class="new-notifications hide" role="activity"></div>
                </button>
                <button action="open-view" data-view="settings" title="Settings" class="icon">
                  <img class="icon svg inactive" src="/images/settings.svg" />
                  <img class="icon svg active" src="/images/settings-active.svg" />
                </button>
                <button id="new-note-mobile" action="new-note" title="New Note" class="nav icon new-note">
                  <img class="icon svg inactive" src="/images/new-note.svg" />
                  <img class="icon svg active" src="/images/new-note.svg" />
                </button>
              </nav>
            </footer>
          </div>
        </div>
      </div>
    </div>

    <dialog id="media-preview" action="close-media">
      <img action="close-media" src="" />
      <!-- TODO add loader to media preview -->
    </dialog>
    <dialog id="reply-modal">
      <div class="container">
        <header>
          <label>Reply To</label>
          <button class="icon" action="close-modal">
            <img class="icon svg" src="/images/close-modal.svg" />
          </button>
        </header>
        <div id="replying-to"></div>
        <div id="replybox">
          <textarea id="reply-content" class="post-input" placeholder="Reply..."></textarea>
          <div class="post-tools new">
            <button class="action" name="send">Send</button>
          </div>
          <div class="post-tools reply">
            <button class="action" name="reply-all" data-all="1">Reply All</button>
            <button class="action" name="reply">Reply</button>
          </div>
        </div>
      </div>
    </dialog>
    <dialog id="profile-editor">
      <div class="container">
        <header>
          <label>Update Profile</label>
          <button class="icon" action="close-modal">
            <img class="icon svg" src="/images/close-modal.svg" />
          </button>
        </header>
        <div>
          <input type="text" class="block w100" name="name" placeholder="Name" />
          <input type="text" class="block w100" name="display_name" placeholder="Display Name" />
          <input type="text" class="block w100" name="picture" placeholder="Picture URL" />
          <input type="text" class="block w100" name="banner" placeholder="Banner URL" />
          <input type="text" class="block w100" name="website" placeholder="Website" />
          <input type="text" class="block w100" name="lud06" placeholder="lud06" />
          <input type="text" class="block w100" name="nip05" placeholder="nip05" />
          <textarea name="about" class="block w100" placeholder="A bit about you."></textarea>
          <button class="action float-right" action="open-profile-editor">Update</button>
        </div>
      </div>
    </dialog>
    <dialog id="event-details">
      <div class="container">
        <header>
          <label>Event Details</label>
          <button class="icon modal-floating-close-btn" action="close-modal">
            <img class="icon svg" src="/images/close-modal.svg" />
          </button>
        </header>
        <div class="max-content">
          <pre><code></code></pre>
        </div>
      </div>
    </dialog>
  </body>
</html>
